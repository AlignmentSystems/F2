
	// Only set globals if there's no AMD
	if (!define || !define.amd) {
		var modules = [
			'F2',
			'F2.BaseAppClass',
			'F2.Constants',
			'F2.Events',
			'F2.Schemas',
			'F2.UI'
		];

		// Toss all the modules on the global
		require.call(window, modules, function() {
			var args = Array.prototype.slice.call(arguments);

			for (var i = 0, len = args.length; i < len; i++) {
				if (modules[i] === 'F2') {
					window.F2 = args[i];
				}
				else {
					var moduleName = modules[i].split('.')[1];
					window.F2[moduleName] = args[i];
				}
			}
		});
	}

	// Automatically parse the DOM for AppConfig placeholders
	require(['F2', 'F2._Helpers.AppPlaceholders'], function(F2, __AppPlaceholders__) {
		var Helpers = {
			AppPlaceholders: __AppPlaceholders__
		};

		var placeholders = Helpers.AppPlaceholders.getInNode(document.body);

		if (placeholders && placeholders.length) {
			var appConfigs = _.map(placeholders, function(placeholder) {
				return placeholder.appConfig;
			});

			F2.load({
				appConfigs: appConfigs,
				success: function() {
					var args = Array.prototype.slice.call(arguments);

					for (var i = 0, len = args.length; i < len; i++) {
						placeholders[i].node.appendChild(args[i].root);
					}
				}
			});
		}
	});
})();