!function(){function noop(){}("undefined"==typeof console||"undefined"==typeof console.log)&&(console={assert:noop,clear:noop,count:noop,debug:noop,dir:noop,dirxml:noop,error:noop,exception:noop,group:noop,groupCollapsed:noop,groupEnd:noop,info:noop,log:noop,markTimeline:noop,profile:noop,profileEnd:noop,table:noop,time:noop,timeEnd:noop,timeStamp:noop,trace:noop,warn:noop});var F2={},Helpers={},_exports={},_module={exports:{}},_window={document:window.document,XMLHttpRequest:window.XMLHttpRequest,ActiveXObject:window.ActiveXObject,XDomainRequest:window.XDomainRequest};!function(exports,window,f2Window,module){(function(){var e,t,r,n,i,o,a,s,l,u,c,p,f,h,d,m,y,g,v,_,x,A={}.toString,b="function"==typeof define&&define.amd,E="object"==typeof exports&&exports,w='{"A":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}',O=new Date(-0xc782b5b800cec);try{O=-109252==O.getUTCFullYear()&&0===O.getUTCMonth()&&1==O.getUTCDate()&&10==O.getUTCHours()&&37==O.getUTCMinutes()&&6==O.getUTCSeconds()&&708==O.getUTCMilliseconds()}catch(S){}if(O||(v=Math.floor,_=[0,31,59,90,120,151,181,212,243,273,304,334],x=function(e,t){return _[t]+365*(e-1970)+v((e-1969+(t=+(t>1)))/4)-v((e-1901+t)/100)+v((e-1601+t)/400)}),b||E?(b&&define("json",E={}),"object"==typeof JSON&&JSON&&(E.stringify=JSON.stringify,E.parse=JSON.parse)):E=this.JSON||(this.JSON={}),n="function"==typeof E.stringify&&!x){(O=function(){return 1}).toJSON=O;try{n="0"===E.stringify(0)&&"0"===E.stringify(new Number)&&'""'==E.stringify(new String)&&E.stringify(A)===r&&E.stringify(r)===r&&E.stringify()===r&&"1"===E.stringify(O)&&"[1]"==E.stringify([O])&&"[null]"==E.stringify([r])&&"null"==E.stringify(null)&&"[null,null,null]"==E.stringify([r,A,null])&&E.stringify({result:[O,!0,!1,null,"\x00\b\n\f\r	"]})==w&&"1"===E.stringify(null,O)&&"[\n 1,\n 2\n]"==E.stringify([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==E.stringify(new Date(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==E.stringify(new Date(864e13))&&'"-000001-01-01T00:00:00.000Z"'==E.stringify(new Date(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==E.stringify(new Date(-1))}catch(S){n=!1}}if("function"==typeof E.parse)try{if(0===E.parse("0")&&!E.parse(!1)&&(O=E.parse(w),l=5==O.A.length&&1==O.A[0])){try{l=!E.parse('"	"')}catch(S){}if(l)try{l=1!=E.parse("01")}catch(S){}}}catch(S){l=!1}O=w=null,n&&l||((e={}.hasOwnProperty)||(e=function(t){var r,n={};return(n.__proto__=null,n.__proto__={toString:1},n).toString!=A?e=function(e){var t=this.__proto__,r=e in(this.__proto__=null,this);return this.__proto__=t,r}:(r=n.constructor,e=function(e){var t=(this.constructor||r).prototype;return e in this&&!(e in t&&this[e]===t[e])}),n=null,e.call(this,t)}),t=function(t,r){var n,i,o,a,s=0;(n=function(){this.valueOf=0}).prototype.valueOf=0,i=new n;for(o in i)e.call(i,o)&&s++;return n=i=null,s?a=2==s?function(t,r){var n,i={},o="[object Function]"==A.call(t);for(n in t)o&&"prototype"==n||e.call(i,n)||!(i[n]=1)||!e.call(t,n)||r(n)}:function(t,r){var n,i,o="[object Function]"==A.call(t);for(n in t)o&&"prototype"==n||!e.call(t,n)||(i="constructor"===n)||r(n);(i||e.call(t,n="constructor"))&&r(n)}:(i=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],a=function(t,r){var n,o,a="[object Function]"==A.call(t);for(n in t)a&&"prototype"==n||!e.call(t,n)||r(n);for(o=i.length;n=i[--o];e.call(t,n)&&r(n));}),a(t,r)},n||(i={"\\":"\\\\",'"':'\\"',"\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},o=function(e,t){return("000000"+(t||0)).slice(-e)},a=function(e){for(var t,r='"',n=0;t=e.charAt(n);n++)r+='\\"\b\f\n\r	'.indexOf(t)>-1?i[t]:" ">t?"\\u00"+o(2,t.charCodeAt(0).toString(16)):t;return r+'"'},s=function(n,i,l,u,c,p,f){var h,d,m,y,g,_,b,E,w,O,S,M,P,T,I,N=i[n];if("object"==typeof N&&N)if(h=A.call(N),"[object Date]"!=h||e.call(N,"toJSON"))"function"==typeof N.toJSON&&("[object Number]"!=h&&"[object String]"!=h&&"[object Array]"!=h||e.call(N,"toJSON"))&&(N=N.toJSON(n));else if(N>-1/0&&1/0>N){if(x){for(y=v(N/864e5),d=v(y/365.2425)+1970-1;x(d+1,0)<=y;d++);for(m=v((y-x(d,0))/30.42);x(d,m+1)<=y;m++);y=1+y-x(d,m),g=(N%864e5+864e5)%864e5,_=v(g/36e5)%24,b=v(g/6e4)%60,E=v(g/1e3)%60,w=g%1e3}else d=N.getUTCFullYear(),m=N.getUTCMonth(),y=N.getUTCDate(),_=N.getUTCHours(),b=N.getUTCMinutes(),E=N.getUTCSeconds(),w=N.getUTCMilliseconds();N=(0>=d||d>=1e4?(0>d?"-":"+")+o(6,0>d?-d:d):o(4,d))+"-"+o(2,m+1)+"-"+o(2,y)+"T"+o(2,_)+":"+o(2,b)+":"+o(2,E)+"."+o(3,w)+"Z"}else N=null;if(l&&(N=l.call(i,n,N)),null===N)return"null";if(h=A.call(N),"[object Boolean]"==h)return""+N;if("[object Number]"==h)return N>-1/0&&1/0>N?""+N:"null";if("[object String]"==h)return a(N);if("object"==typeof N){for(P=f.length;P--;)if(f[P]===N)throw TypeError();if(f.push(N),O=[],T=p,p+=c,"[object Array]"==h){for(M=0,P=N.length;P>M;I||(I=!0),M++)S=s(M,N,l,u,c,p,f),O.push(S===r?"null":S);return I?c?"[\n"+p+O.join(",\n"+p)+"\n"+T+"]":"["+O.join(",")+"]":"[]"}return t(u||N,function(e){var t=s(e,N,l,u,c,p,f);t!==r&&O.push(a(e)+":"+(c?" ":"")+t),I||(I=!0)}),I?c?"{\n"+p+O.join(",\n"+p)+"\n"+T+"}":"{"+O.join(",")+"}":"{}"}},E.stringify=function(e,t,r){var n,i,o,a,l,u;if("function"==typeof t||"object"==typeof t&&t)if("[object Function]"==A.call(t))i=t;else if("[object Array]"==A.call(t))for(o={},a=0,l=t.length;l>a;u=t[a++],("[object String]"==A.call(u)||"[object Number]"==A.call(u))&&(o[u]=1));if(r)if("[object Number]"==A.call(r)){if((r-=r%1)>0)for(n="",r>10&&(r=10);n.length<r;n+=" ");}else"[object String]"==A.call(r)&&(n=r.length<=10?r:r.slice(0,10));return s("",(u={},u[""]=e,u),i,o,n,"",[])}),l||(u=String.fromCharCode,c={"\\":"\\",'"':'"',"/":"/",b:"\b",t:"	",n:"\n",f:"\f",r:"\r"},p=function(){throw y=g=null,SyntaxError()},f=function(){for(var e,t,r,n,i,o=g,a=o.length;a>y;)if(e=o.charAt(y),"	\r\n ".indexOf(e)>-1)y++;else{if("{}[]:,".indexOf(e)>-1)return y++,e;if('"'==e){for(t="@",y++;a>y;)if(e=o.charAt(y)," ">e)p();else if("\\"==e)if(e=o.charAt(++y),'\\"/btnfr'.indexOf(e)>-1)t+=c[e],y++;else if("u"==e){for(r=++y,n=y+4;n>y;y++)e=o.charAt(y),e>="0"&&"9">=e||e>="a"&&"f">=e||e>="A"&&"F">=e||p();t+=u("0x"+o.slice(r,y))}else p();else{if('"'==e)break;t+=e,y++}if('"'==o.charAt(y))return y++,t;p()}else{if(r=y,"-"==e&&(i=!0,e=o.charAt(++y)),e>="0"&&"9">=e){for("0"==e&&(e=o.charAt(y+1),e>="0"&&"9">=e)&&p(),i=!1;a>y&&(e=o.charAt(y),e>="0"&&"9">=e);y++);if("."==o.charAt(y)){for(n=++y;a>n&&(e=o.charAt(n),e>="0"&&"9">=e);n++);n==y&&p(),y=n}if(e=o.charAt(y),"e"==e||"E"==e){for(e=o.charAt(++y),("+"==e||"-"==e)&&y++,n=y;a>n&&(e=o.charAt(n),e>="0"&&"9">=e);n++);n==y&&p(),y=n}return+o.slice(r,y)}if(i&&p(),"true"==o.slice(y,y+4))return y+=4,!0;if("false"==o.slice(y,y+5))return y+=5,!1;if("null"==o.slice(y,y+4))return y+=4,null;p()}}return"$"},h=function(e){var t,r;if("$"==e&&p(),"string"==typeof e){if("@"==e.charAt(0))return e.slice(1);if("["==e){for(t=[];e=f(),"]"!=e;r||(r=!0))r&&(","==e?(e=f(),"]"==e&&p()):p()),","==e&&p(),t.push(h(e));return t}if("{"==e){for(t={};e=f(),"}"!=e;r||(r=!0))r&&(","==e?(e=f(),"}"==e&&p()):p()),(","==e||"string"!=typeof e||"@"!=e.charAt(0)||":"!=f())&&p(),t[e.slice(1)]=h(f());return t}p()}return e},m=function(e,t,n){var i=d(e,t,n);i===r?delete e[t]:e[t]=i},d=function(e,r,n){var i,o=e[r];if("object"==typeof o&&o)if("[object Array]"==A.call(o))for(i=o.length;i--;)m(o,i,n);else t(o,function(e){m(o,e,n)});return n.call(e,r,o)},E.parse=function(e,t){y=0,g=e;var r=h(f());return"$"!=f()&&p(),y=g=null,t&&"[object Function]"==A.call(t)?d((O={},O[""]=r,O),"",t):r}))}).call(this),exports.JSON={stringify:exports.stringify,parse:exports.parse},delete exports.stringify,delete exports.parse,!function(e,t,r){"undefined"!=typeof module&&module.exports?module.exports=r():"function"==typeof define&&define.amd?define(r):t[e]=r()}("reqwest",this,function(){function handleReadyState(e,t,r){return function(){return e._aborted?r(e.request):void(e.request&&4==e.request[readyState]&&(e.request.onreadystatechange=noop,twoHundo.test(e.request.status)?t(e.request):r(e.request)))}}function setHeaders(e,t){var r,n=t.headers||{};n.Accept=n.Accept||defaultHeaders.accept[t.type]||defaultHeaders.accept["*"],t.crossOrigin||n[requestedWith]||(n[requestedWith]=defaultHeaders.requestedWith),n[contentType]||(n[contentType]=t.contentType||defaultHeaders.contentType);for(r in n)n.hasOwnProperty(r)&&"setRequestHeader"in e&&e.setRequestHeader(r,n[r])}function setCredentials(e,t){"undefined"!=typeof t.withCredentials&&"undefined"!=typeof e.withCredentials&&(e.withCredentials=!!t.withCredentials)}function generalCallback(e){lastValue=e}function urlappend(e,t){return e+(/\?/.test(e)?"&":"?")+t}function handleJsonp(e,t,r,n){var i=uniqid++,o=e.jsonpCallback||"callback",a=e.jsonpCallbackName||reqwest.getcallbackPrefix(i),s=new RegExp("((^|\\?|&)"+o+")=([^&]+)"),l=n.match(s),u=doc.createElement("script"),c=0,p=-1!==navigator.userAgent.indexOf("MSIE 10.0");return l?"?"===l[3]?n=n.replace(s,"$1="+a):a=l[3]:n=urlappend(n,o+"="+a),win[a]=generalCallback,u.type="text/javascript",u.src=n,u.async=!0,"undefined"==typeof u.onreadystatechange||p||(u.event="onclick",u.htmlFor=u.id="_reqwest_"+i),u.onload=u.onreadystatechange=function(){return u[readyState]&&"complete"!==u[readyState]&&"loaded"!==u[readyState]||c?!1:(u.onload=u.onreadystatechange=null,u.onclick&&u.onclick(),t(lastValue),lastValue=void 0,head.removeChild(u),void(c=1))},head.appendChild(u),{abort:function(){u.onload=u.onreadystatechange=null,r({},"Request is aborted: timeout",{}),lastValue=void 0,head.removeChild(u),c=1}}}function getRequest(e,t){var r,n=this.o,i=(n.method||"GET").toUpperCase(),o="string"==typeof n?n:n.url,a=n.processData!==!1&&n.data&&"string"!=typeof n.data?reqwest.toQueryString(n.data):n.data||null,s=!1;return"jsonp"!=n.type&&"GET"!=i||!a||(o=urlappend(o,a),a=null),"jsonp"==n.type?handleJsonp(n,e,t,o):(r=xhr(n),r.open(i,o,n.async===!1?!1:!0),setHeaders(r,n),setCredentials(r,n),win[xDomainRequest]&&r instanceof win[xDomainRequest]?(r.onload=e,r.onerror=t,r.onprogress=function(){},s=!0):r.onreadystatechange=handleReadyState(this,e,t),n.before&&n.before(r),s?setTimeout(function(){r.send(a)},200):r.send(a),r)}function Reqwest(e,t){this.o=e,this.fn=t,init.apply(this,arguments)}function setType(e){var t=e.match(/\.(json|jsonp|html|xml)(\?|$)/);return t?t[1]:"js"}function init(o,fn){function complete(e){for(o.timeout&&clearTimeout(self.timeout),self.timeout=null;self._completeHandlers.length>0;)self._completeHandlers.shift()(e)}function success(resp){if(resp){resp="jsonp"!==type?self.request:resp;var filteredResponse=globalSetupOptions.dataFilter(resp.responseText,type),r=filteredResponse;try{resp.responseText=r}catch(e){}if(r)switch(type){case"json":try{resp=win.JSON?win.JSON.parse(r):eval("("+r+")")}catch(err){return error(resp,"Could not parse JSON in response",err)}break;case"js":resp=eval(r);break;case"html":resp=r;break;case"xml":resp=resp.responseXML&&resp.responseXML.parseError&&resp.responseXML.parseError.errorCode&&resp.responseXML.parseError.reason?null:resp.responseXML}for(self._responseArgs.resp=resp,self._fulfilled=!0,fn(resp),self._successHandler(resp);self._fulfillmentHandlers.length>0;)resp=self._fulfillmentHandlers.shift()(resp);complete(resp)}}function error(e,t,r){for(e=self.request,self._responseArgs.resp=e,self._responseArgs.msg=t,self._responseArgs.t=r,self._erred=!0;self._errorHandlers.length>0;)self._errorHandlers.shift()(e,t,r);complete(e)}this.url="string"==typeof o?o:o.url,this.timeout=null,this._fulfilled=!1,this._successHandler=function(){},this._fulfillmentHandlers=[],this._errorHandlers=[],this._completeHandlers=[],this._erred=!1,this._responseArgs={};var self=this,type=o.type||setType(this.url);fn=fn||function(){},o.timeout&&(this.timeout=setTimeout(function(){self.abort()},o.timeout)),o.success&&(this._successHandler=function(){o.success.apply(o,arguments)}),o.error&&this._errorHandlers.push(function(){o.error.apply(o,arguments)}),o.complete&&this._completeHandlers.push(function(){o.complete.apply(o,arguments)}),this.request=getRequest.call(this,success,error)}function reqwest(e,t){return new Reqwest(e,t)}function normalize(e){return e?e.replace(/\r?\n/g,"\r\n"):""}function serial(e,t){var r,n,i,o,a=e.name,s=e.tagName.toLowerCase(),l=function(e){e&&!e.disabled&&t(a,normalize(e.attributes.value&&e.attributes.value.specified?e.value:e.text))};if(!e.disabled&&a)switch(s){case"input":/reset|button|image|file/i.test(e.type)||(r=/checkbox/i.test(e.type),n=/radio/i.test(e.type),i=e.value,(!(r||n)||e.checked)&&t(a,normalize(r&&""===i?"on":i)));break;case"textarea":t(a,normalize(e.value));break;case"select":if("select-one"===e.type.toLowerCase())l(e.selectedIndex>=0?e.options[e.selectedIndex]:null);else for(o=0;e.length&&o<e.length;o++)e.options[o].selected&&l(e.options[o])}}function eachFormElement(){var e,t,r=this,n=function(e,t){var n,i,o;for(n=0;n<t.length;n++)for(o=e[byTag](t[n]),i=0;i<o.length;i++)serial(o[i],r)};for(t=0;t<arguments.length;t++)e=arguments[t],/input|select|textarea/i.test(e.tagName)&&serial(e,r),n(e,["input","select","textarea"])}function serializeQueryString(){return reqwest.toQueryString(reqwest.serializeArray.apply(null,arguments))}function serializeHash(){var e={};return eachFormElement.apply(function(t,r){t in e?(e[t]&&!isArray(e[t])&&(e[t]=[e[t]]),e[t].push(r)):e[t]=r},arguments),e}function buildParams(e,t,r,n){var i,o,a,s=/\[\]$/;if(isArray(t))for(o=0;t&&o<t.length;o++)a=t[o],r||s.test(e)?n(e,a):buildParams(e+"["+("object"==typeof a?o:"")+"]",a,r,n);else if(t&&"[object Object]"===t.toString())for(i in t)buildParams(e+"["+i+"]",t[i],r,n);else n(e,t)}var win=window,doc=document,twoHundo=/^20\d$/,byTag="getElementsByTagName",readyState="readyState",contentType="Content-Type",requestedWith="X-Requested-With",head=doc[byTag]("head")[0],uniqid=0,callbackPrefix="reqwest_"+ +new Date,lastValue,xmlHttpRequest="XMLHttpRequest",xDomainRequest="XDomainRequest",noop=function(){},isArray="function"==typeof Array.isArray?Array.isArray:function(e){return e instanceof Array},defaultHeaders={contentType:"application/x-www-form-urlencoded",requestedWith:xmlHttpRequest,accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"}},xhr=function(e){if(e.crossOrigin===!0){var t=win[xmlHttpRequest]?new XMLHttpRequest:null;if(t&&"withCredentials"in t)return t;if(win[xDomainRequest])return new XDomainRequest;throw new Error("Browser does not support cross-origin requests")}return win[xmlHttpRequest]?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")},globalSetupOptions={dataFilter:function(e){return e}};return Reqwest.prototype={abort:function(){this._aborted=!0,this.request.abort()},retry:function(){init.call(this,this.o,this.fn)},then:function(e,t){return e=e||function(){},t=t||function(){},this._fulfilled?this._responseArgs.resp=e(this._responseArgs.resp):this._erred?t(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):(this._fulfillmentHandlers.push(e),this._errorHandlers.push(t)),this},always:function(e){return this._fulfilled||this._erred?e(this._responseArgs.resp):this._completeHandlers.push(e),this},fail:function(e){return this._erred?e(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):this._errorHandlers.push(e),this}},reqwest.serializeArray=function(){var e=[];return eachFormElement.apply(function(t,r){e.push({name:t,value:r})},arguments),e},reqwest.serialize=function(){if(0===arguments.length)return"";var e,t,r=Array.prototype.slice.call(arguments,0);return e=r.pop(),e&&e.nodeType&&r.push(e)&&(e=null),e&&(e=e.type),t="map"==e?serializeHash:"array"==e?reqwest.serializeArray:serializeQueryString,t.apply(null,r)},reqwest.toQueryString=function(e,t){var r,n,i=t||!1,o=[],a=encodeURIComponent,s=function(e,t){t="function"==typeof t?t():null==t?"":t,o[o.length]=a(e)+"="+a(t)};if(isArray(e))for(n=0;e&&n<e.length;n++)s(e[n].name,e[n].value);else for(r in e)buildParams(r,e[r],i,s);return o.join("&").replace(/%20/g,"+")},reqwest.getcallbackPrefix=function(){return callbackPrefix},reqwest.compat=function(e,t){return e&&(e.type&&(e.method=e.type)&&delete e.type,e.dataType&&(e.type=e.dataType),e.jsonpCallback&&(e.jsonpCallbackName=e.jsonpCallback)&&delete e.jsonpCallback,e.jsonp&&(e.jsonpCallback=e.jsonp)),new Reqwest(e,t)},reqwest.ajaxSetup=function(e){e=e||{};for(var t in e)globalSetupOptions[t]=e[t]},reqwest}),exports.reqwest=module.exports,module={exports:{}},function(e){"use strict";function t(e,r){if(e===r)return!0;if("object"==typeof e&&"object"==typeof r){if(Array.isArray(e)!==Array.isArray(r))return!1;if(Array.isArray(e)){if(e.length!==r.length)return!1;for(var n=0;n<e.length;n++)if(!t(e[n],r[n]))return!1}else{var i;for(i in e)if(void 0===r[i]&&void 0!==e[i])return!1;for(i in r)if(void 0===e[i]&&void 0!==r[i])return!1;for(i in e)if(!t(e[i],r[i]))return!1}return!0}return!1}function r(e){var t=String(e).replace(/^\s+|\s+$/g,"").match(/^([^:\/?#]+:)?(\/\/(?:[^:@]*(?::[^:@]*)?@)?(([^:\/?#]*)(?::(\d*))?))?([^?#]*)(\?[^#]*)?(#[\s\S]*)?/);return t?{href:t[0]||"",protocol:t[1]||"",authority:t[2]||"",host:t[3]||"",hostname:t[4]||"",port:t[5]||"",pathname:t[6]||"",search:t[7]||"",hash:t[8]||""}:null}function n(e,t){function n(e){var t=[];return e.replace(/^(\.\.?(\/|$))+/,"").replace(/\/(\.(\/|$))+/g,"/").replace(/\/\.\.$/,"/../").replace(/\/?[^\/]*/g,function(e){"/.."===e?t.pop():t.push(e)}),t.join("").replace(/^\//,"/"===e.charAt(0)?"/":"")}return t=r(t||""),e=r(e||""),t&&e?(t.protocol||e.protocol)+(t.protocol||t.authority?t.authority:e.authority)+n(t.protocol||t.authority||"/"===t.pathname.charAt(0)?t.pathname:t.pathname?(e.authority&&!e.pathname?"/":"")+e.pathname.slice(0,e.pathname.lastIndexOf("/")+1)+t.pathname:e.pathname)+(t.protocol||t.authority||t.pathname?t.search:t.search||e.search)+t.hash:null}function i(e){return e.split("#")[0]}function o(e,t){if(void 0===t?t=e.id:"string"==typeof e.id&&(t=n(t,e.id),e.id=t),"object"==typeof e)if(Array.isArray(e))for(var r=0;r<e.length;r++)o(e[r],t);else if("string"==typeof e.$ref)e.$ref=n(t,e.$ref);else for(var i in e)"enum"!==i&&o(e[i],t)}function a(e,t,r,n,i){if(void 0===e)throw new Error("No code supplied for error: "+t);this.code=e,this.message=t,this.dataPath=r||"",this.schemaPath=n||"",this.subErrors=i||null}function s(e,t){if(t.substring(0,e.length)===e){var r=t.substring(e.length);if(t.length>0&&"/"===t.charAt(e.length-1)||"#"===r.charAt(0)||"?"===r.charAt(0))return!0}return!1}function l(e){var t=new u,r=e||"en",a={addFormat:function(){t.addFormat.apply(t,arguments)},language:function(e){return e?(f[e]||(e=e.split("-")[0]),f[e]?(r=e,e):!1):r},addLanguage:function(e,t){var r;for(r in c)t[r]&&!t[c[r]]&&(t[c[r]]=t[r]);var n=e.split("-")[0];if(f[n]){f[e]=Object.create(f[n]);for(r in t)"undefined"==typeof f[n][r]&&(f[n][r]=t[r]),f[e][r]=t[r]}else f[e]=t,f[n]=t;return this},freshApi:function(e){var t=l();return e&&t.language(e),t},validate:function(e,n,i,o){var a=new u(t,!1,f[r],i,o);"string"==typeof n&&(n={$ref:n}),a.addSchema("",n);var s=a.validateAll(e,n,null,null,"");return!s&&o&&(s=a.banUnknownProperties()),this.error=s,this.missing=a.missing,this.valid=null===s,this.valid},validateResult:function(){var e={};return this.validate.apply(e,arguments),e},validateMultiple:function(e,n,i,o){var a=new u(t,!0,f[r],i,o);"string"==typeof n&&(n={$ref:n}),a.addSchema("",n),a.validateAll(e,n,null,null,""),o&&a.banUnknownProperties();var s={};return s.errors=a.errors,s.missing=a.missing,s.valid=0===s.errors.length,s},addSchema:function(){return t.addSchema.apply(t,arguments)},getSchema:function(){return t.getSchema.apply(t,arguments)},getSchemaMap:function(){return t.getSchemaMap.apply(t,arguments)},getSchemaUris:function(){return t.getSchemaUris.apply(t,arguments)},getMissingUris:function(){return t.getMissingUris.apply(t,arguments)},dropSchemas:function(){t.dropSchemas.apply(t,arguments)},reset:function(){t.reset(),this.error=null,this.missing=[],this.valid=!0},missing:[],error:null,valid:!0,normSchema:o,resolveUrl:n,getDocumentUri:i,errorCodes:c};return a}Object.keys||(Object.keys=function(){var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),r=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],n=r.length;return function(i){if("object"!=typeof i&&"function"!=typeof i||null===i)throw new TypeError("Object.keys called on non-object");var o=[];for(var a in i)e.call(i,a)&&o.push(a);if(t)for(var s=0;n>s;s++)e.call(i,r[s])&&o.push(r[s]);return o}}()),Object.create||(Object.create=function(){function e(){}return function(t){if(1!==arguments.length)throw new Error("Object.create implementation only accepts one parameter.");return e.prototype=t,new e}}()),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){if(null===this)throw new TypeError;var t=Object(this),r=t.length>>>0;if(0===r)return-1;var n=0;if(arguments.length>1&&(n=Number(arguments[1]),n!==n?n=0:0!==n&&1/0!==n&&n!==-1/0&&(n=(n>0||-1)*Math.floor(Math.abs(n)))),n>=r)return-1;for(var i=n>=0?n:Math.max(r-Math.abs(n),0);r>i;i++)if(i in t&&t[i]===e)return i;return-1}),Object.isFrozen||(Object.isFrozen=function(e){for(var t="tv4_test_frozen_key";e.hasOwnProperty(t);)t+=Math.random();try{return e[t]=!0,delete e[t],!1}catch(r){return!0}});var u=function(e,t,r,n,i){this.missing=[],this.missingMap={},this.formatValidators=e?Object.create(e.formatValidators):{},this.schemas=e?Object.create(e.schemas):{},this.collectMultiple=t,this.errors=[],this.handleError=t?this.collectError:this.returnError,n&&(this.checkRecursive=!0,this.scanned=[],this.scannedFrozen=[],this.scannedFrozenSchemas=[],this.key="tv4_validation_id"),i&&(this.trackUnknownProperties=!0,this.knownPropertyPaths={},this.unknownPropertyPaths={}),this.errorMessages=r};u.prototype.createError=function(e,t,r,n,i){var o=this.errorMessages[e]||p[e];if("string"!=typeof o)return new a(e,"Unknown error code "+e+": "+JSON.stringify(t),r,n,i);var s=o.replace(/\{([^{}]*)\}/g,function(e,r){var n=t[r];return"string"==typeof n||"number"==typeof n?n:e});return new a(e,s,r,n,i)},u.prototype.returnError=function(e){return e},u.prototype.collectError=function(e){return e&&this.errors.push(e),null},u.prototype.prefixErrors=function(e,t,r){for(var n=e;n<this.errors.length;n++)this.errors[n]=this.errors[n].prefixWith(t,r);return this},u.prototype.banUnknownProperties=function(){for(var e in this.unknownPropertyPaths){var t=this.createError(c.UNKNOWN_PROPERTY,{path:e},e,""),r=this.handleError(t);if(r)return r}return null},u.prototype.addFormat=function(e,t){if("object"==typeof e){for(var r in e)this.addFormat(r,e[r]);return this}this.formatValidators[e]=t},u.prototype.getSchema=function(e){var t;if(void 0!==this.schemas[e])return t=this.schemas[e];var r=e,n="";if(-1!==e.indexOf("#")&&(n=e.substring(e.indexOf("#")+1),r=e.substring(0,e.indexOf("#"))),"object"==typeof this.schemas[r]){t=this.schemas[r];var i=decodeURIComponent(n);if(""===i)return t;if("/"!==i.charAt(0))return void 0;for(var o=i.split("/").slice(1),a=0;a<o.length;a++){var s=o[a].replace(/~1/g,"/").replace(/~0/g,"~");if(void 0===t[s]){t=void 0;break}t=t[s]}if(void 0!==t)return t}void 0===this.missing[r]&&(this.missing.push(r),this.missing[r]=r,this.missingMap[r]=r)},u.prototype.searchSchemas=function(e,t){if("string"==typeof e.id&&s(t,e.id)&&void 0===this.schemas[e.id]&&(this.schemas[e.id]=e),"object"==typeof e)for(var r in e)if("enum"!==r)if("object"==typeof e[r])this.searchSchemas(e[r],t);else if("$ref"===r){var n=i(e[r]);n&&void 0===this.schemas[n]&&void 0===this.missingMap[n]&&(this.missingMap[n]=n)}},u.prototype.addSchema=function(e,t){if("undefined"==typeof t){if("object"!=typeof e||"string"!=typeof e.id)return;t=e,e=t.id}(e=i(e)+"#")&&(e=i(e)),this.schemas[e]=t,delete this.missingMap[e],o(t,e),this.searchSchemas(t,e)},u.prototype.getSchemaMap=function(){var e={};for(var t in this.schemas)e[t]=this.schemas[t];return e},u.prototype.getSchemaUris=function(e){var t=[];for(var r in this.schemas)(!e||e.test(r))&&t.push(r);return t},u.prototype.getMissingUris=function(e){var t=[];for(var r in this.missingMap)(!e||e.test(r))&&t.push(r);return t},u.prototype.dropSchemas=function(){this.schemas={},this.reset()},u.prototype.reset=function(){this.missing=[],this.missingMap={},this.errors=[]},u.prototype.validateAll=function(e,t,r,n,i){var o;if(void 0!==t.$ref&&(t=this.getSchema(t.$ref),!t))return null;if(this.checkRecursive&&"object"==typeof e){if(o=!this.scanned.length,e[this.key]&&-1!==e[this.key].indexOf(t))return null;var a;if(Object.isFrozen(e)&&(a=this.scannedFrozen.indexOf(e),-1!==a&&-1!==this.scannedFrozenSchemas[a].indexOf(t)))return null;if(this.scanned.push(e),Object.isFrozen(e))-1===a&&(a=this.scannedFrozen.length,this.scannedFrozen.push(e),this.scannedFrozenSchemas.push([])),this.scannedFrozenSchemas[a].push(t);else{if(!e[this.key])try{Object.defineProperty(e,this.key,{value:[],configurable:!0})}catch(s){e[this.key]=[]}e[this.key].push(t)}}var l=this.errors.length,u=this.validateBasic(e,t,i)||this.validateNumeric(e,t,i)||this.validateString(e,t,i)||this.validateArray(e,t,i)||this.validateObject(e,t,i)||this.validateCombinations(e,t,i)||this.validateFormat(e,t,i)||null;if(o){for(;this.scanned.length;){var c=this.scanned.pop();delete c[this.key]}this.scannedFrozen=[],this.scannedFrozenSchemas=[]}if(u||l!==this.errors.length)for(;r&&r.length||n&&n.length;){var p=r&&r.length?""+r.pop():null,f=n&&n.length?""+n.pop():null;u&&(u=u.prefixWith(p,f)),this.prefixErrors(l,p,f)}return this.handleError(u)},u.prototype.validateFormat=function(e,t){if("string"!=typeof t.format||!this.formatValidators[t.format])return null;var r=this.formatValidators[t.format].call(null,e,t);return"string"==typeof r||"number"==typeof r?this.createError(c.FORMAT_CUSTOM,{message:r}).prefixWith(null,"format"):r&&"object"==typeof r?this.createError(c.FORMAT_CUSTOM,{message:r.message||"?"},r.dataPath||null,r.schemaPath||"/format"):null},u.prototype.validateBasic=function(e,t,r){var n;return(n=this.validateType(e,t,r))?n.prefixWith(null,"type"):(n=this.validateEnum(e,t,r))?n.prefixWith(null,"type"):null},u.prototype.validateType=function(e,t){if(void 0===t.type)return null;var r=typeof e;null===e?r="null":Array.isArray(e)&&(r="array");var n=t.type;"object"!=typeof n&&(n=[n]);for(var i=0;i<n.length;i++){var o=n[i];if(o===r||"integer"===o&&"number"===r&&e%1===0)return null}return this.createError(c.INVALID_TYPE,{type:r,expected:n.join("/")})},u.prototype.validateEnum=function(e,r){if(void 0===r["enum"])return null;for(var n=0;n<r["enum"].length;n++){var i=r["enum"][n];if(t(e,i))return null}return this.createError(c.ENUM_MISMATCH,{value:"undefined"!=typeof JSON?JSON.stringify(e):e})},u.prototype.validateNumeric=function(e,t,r){return this.validateMultipleOf(e,t,r)||this.validateMinMax(e,t,r)||null},u.prototype.validateMultipleOf=function(e,t){var r=t.multipleOf||t.divisibleBy;return void 0===r?null:"number"==typeof e&&e%r!==0?this.createError(c.NUMBER_MULTIPLE_OF,{value:e,multipleOf:r}):null},u.prototype.validateMinMax=function(e,t){if("number"!=typeof e)return null;if(void 0!==t.minimum){if(e<t.minimum)return this.createError(c.NUMBER_MINIMUM,{value:e,minimum:t.minimum}).prefixWith(null,"minimum");if(t.exclusiveMinimum&&e===t.minimum)return this.createError(c.NUMBER_MINIMUM_EXCLUSIVE,{value:e,minimum:t.minimum}).prefixWith(null,"exclusiveMinimum")}if(void 0!==t.maximum){if(e>t.maximum)return this.createError(c.NUMBER_MAXIMUM,{value:e,maximum:t.maximum}).prefixWith(null,"maximum");if(t.exclusiveMaximum&&e===t.maximum)return this.createError(c.NUMBER_MAXIMUM_EXCLUSIVE,{value:e,maximum:t.maximum}).prefixWith(null,"exclusiveMaximum")}return null},u.prototype.validateString=function(e,t,r){return this.validateStringLength(e,t,r)||this.validateStringPattern(e,t,r)||null},u.prototype.validateStringLength=function(e,t){return"string"!=typeof e?null:void 0!==t.minLength&&e.length<t.minLength?this.createError(c.STRING_LENGTH_SHORT,{length:e.length,minimum:t.minLength}).prefixWith(null,"minLength"):void 0!==t.maxLength&&e.length>t.maxLength?this.createError(c.STRING_LENGTH_LONG,{length:e.length,maximum:t.maxLength}).prefixWith(null,"maxLength"):null},u.prototype.validateStringPattern=function(e,t){if("string"!=typeof e||void 0===t.pattern)return null;var r=new RegExp(t.pattern);return r.test(e)?null:this.createError(c.STRING_PATTERN,{pattern:t.pattern}).prefixWith(null,"pattern")},u.prototype.validateArray=function(e,t,r){return Array.isArray(e)?this.validateArrayLength(e,t,r)||this.validateArrayUniqueItems(e,t,r)||this.validateArrayItems(e,t,r)||null:null},u.prototype.validateArrayLength=function(e,t){var r;return void 0!==t.minItems&&e.length<t.minItems&&(r=this.createError(c.ARRAY_LENGTH_SHORT,{length:e.length,minimum:t.minItems}).prefixWith(null,"minItems"),this.handleError(r))?r:void 0!==t.maxItems&&e.length>t.maxItems&&(r=this.createError(c.ARRAY_LENGTH_LONG,{length:e.length,maximum:t.maxItems}).prefixWith(null,"maxItems"),this.handleError(r))?r:null},u.prototype.validateArrayUniqueItems=function(e,r){if(r.uniqueItems)for(var n=0;n<e.length;n++)for(var i=n+1;i<e.length;i++)if(t(e[n],e[i])){var o=this.createError(c.ARRAY_UNIQUE,{match1:n,match2:i}).prefixWith(null,"uniqueItems");if(this.handleError(o))return o}return null},u.prototype.validateArrayItems=function(e,t,r){if(void 0===t.items)return null;var n,i;if(Array.isArray(t.items)){for(i=0;i<e.length;i++)if(i<t.items.length){if(n=this.validateAll(e[i],t.items[i],[i],["items",i],r+"/"+i))return n}else if(void 0!==t.additionalItems)if("boolean"==typeof t.additionalItems){if(!t.additionalItems&&(n=this.createError(c.ARRAY_ADDITIONAL_ITEMS,{}).prefixWith(""+i,"additionalItems"),this.handleError(n)))return n}else if(n=this.validateAll(e[i],t.additionalItems,[i],["additionalItems"],r+"/"+i))return n}else for(i=0;i<e.length;i++)if(n=this.validateAll(e[i],t.items,[i],["items"],r+"/"+i))return n;return null},u.prototype.validateObject=function(e,t,r){return"object"!=typeof e||null===e||Array.isArray(e)?null:this.validateObjectMinMaxProperties(e,t,r)||this.validateObjectRequiredProperties(e,t,r)||this.validateObjectProperties(e,t,r)||this.validateObjectDependencies(e,t,r)||null},u.prototype.validateObjectMinMaxProperties=function(e,t){var r,n=Object.keys(e);return void 0!==t.minProperties&&n.length<t.minProperties&&(r=this.createError(c.OBJECT_PROPERTIES_MINIMUM,{propertyCount:n.length,minimum:t.minProperties}).prefixWith(null,"minProperties"),this.handleError(r))?r:void 0!==t.maxProperties&&n.length>t.maxProperties&&(r=this.createError(c.OBJECT_PROPERTIES_MAXIMUM,{propertyCount:n.length,maximum:t.maxProperties}).prefixWith(null,"maxProperties"),this.handleError(r))?r:null},u.prototype.validateObjectRequiredProperties=function(e,t){if(void 0!==t.required)for(var r=0;r<t.required.length;r++){var n=t.required[r];if(void 0===e[n]){var i=this.createError(c.OBJECT_REQUIRED,{key:n}).prefixWith(null,""+r).prefixWith(null,"required");if(this.handleError(i))return i}}return null},u.prototype.validateObjectProperties=function(e,t,r){var n;for(var i in e){var o=r+"/"+i.replace(/~/g,"~0").replace(/\//g,"~1"),a=!1;if(void 0!==t.properties&&void 0!==t.properties[i]&&(a=!0,n=this.validateAll(e[i],t.properties[i],[i],["properties",i],o)))return n;if(void 0!==t.patternProperties)for(var s in t.patternProperties){var l=new RegExp(s);if(l.test(i)&&(a=!0,n=this.validateAll(e[i],t.patternProperties[s],[i],["patternProperties",s],o)))return n}if(a)this.trackUnknownProperties&&(this.knownPropertyPaths[o]=!0,delete this.unknownPropertyPaths[o]);else if(void 0!==t.additionalProperties){if(this.trackUnknownProperties&&(this.knownPropertyPaths[o]=!0,delete this.unknownPropertyPaths[o]),"boolean"==typeof t.additionalProperties){if(!t.additionalProperties&&(n=this.createError(c.OBJECT_ADDITIONAL_PROPERTIES,{}).prefixWith(i,"additionalProperties"),this.handleError(n)))return n
}else if(n=this.validateAll(e[i],t.additionalProperties,[i],["additionalProperties"],o))return n}else this.trackUnknownProperties&&!this.knownPropertyPaths[o]&&(this.unknownPropertyPaths[o]=!0)}return null},u.prototype.validateObjectDependencies=function(e,t,r){var n;if(void 0!==t.dependencies)for(var i in t.dependencies)if(void 0!==e[i]){var o=t.dependencies[i];if("string"==typeof o){if(void 0===e[o]&&(n=this.createError(c.OBJECT_DEPENDENCY_KEY,{key:i,missing:o}).prefixWith(null,i).prefixWith(null,"dependencies"),this.handleError(n)))return n}else if(Array.isArray(o))for(var a=0;a<o.length;a++){var s=o[a];if(void 0===e[s]&&(n=this.createError(c.OBJECT_DEPENDENCY_KEY,{key:i,missing:s}).prefixWith(null,""+a).prefixWith(null,i).prefixWith(null,"dependencies"),this.handleError(n)))return n}else if(n=this.validateAll(e,o,[],["dependencies",i],r))return n}return null},u.prototype.validateCombinations=function(e,t,r){return this.validateAllOf(e,t,r)||this.validateAnyOf(e,t,r)||this.validateOneOf(e,t,r)||this.validateNot(e,t,r)||null},u.prototype.validateAllOf=function(e,t,r){if(void 0===t.allOf)return null;for(var n,i=0;i<t.allOf.length;i++){var o=t.allOf[i];if(n=this.validateAll(e,o,[],["allOf",i],r))return n}return null},u.prototype.validateAnyOf=function(e,t,r){if(void 0===t.anyOf)return null;var n,i,o=[],a=this.errors.length;this.trackUnknownProperties&&(n=this.unknownPropertyPaths,i=this.knownPropertyPaths);for(var s=!0,l=0;l<t.anyOf.length;l++){this.trackUnknownProperties&&(this.unknownPropertyPaths={},this.knownPropertyPaths={});var u=t.anyOf[l],p=this.errors.length,f=this.validateAll(e,u,[],["anyOf",l],r);if(null===f&&p===this.errors.length){if(this.errors=this.errors.slice(0,a),this.trackUnknownProperties){for(var h in this.knownPropertyPaths)i[h]=!0,delete n[h];for(var d in this.unknownPropertyPaths)i[d]||(n[d]=!0);console.log("Continuing"),s=!1;continue}return null}f&&o.push(f.prefixWith(null,""+l).prefixWith(null,"anyOf"))}return this.trackUnknownProperties&&(this.unknownPropertyPaths=n,this.knownPropertyPaths=i),s?(o=o.concat(this.errors.slice(a)),this.errors=this.errors.slice(0,a),this.createError(c.ANY_OF_MISSING,{},"","/anyOf",o)):void 0},u.prototype.validateOneOf=function(e,t,r){if(void 0===t.oneOf)return null;var n,i,o=null,a=[],s=this.errors.length;this.trackUnknownProperties&&(n=this.unknownPropertyPaths,i=this.knownPropertyPaths);for(var l=0;l<t.oneOf.length;l++){this.trackUnknownProperties&&(this.unknownPropertyPaths={},this.knownPropertyPaths={});var u=t.oneOf[l],p=this.errors.length,f=this.validateAll(e,u,[],["oneOf",l],r);if(null===f&&p===this.errors.length){if(null!==o)return this.errors=this.errors.slice(0,s),this.createError(c.ONE_OF_MULTIPLE,{index1:o,index2:l},"","/oneOf");if(o=l,this.trackUnknownProperties){for(var h in this.knownPropertyPaths)i[h]=!0,delete n[h];for(var d in this.unknownPropertyPaths)i[d]||(n[d]=!0)}}else f&&a.push(f.prefixWith(null,""+l).prefixWith(null,"oneOf"))}return this.trackUnknownProperties&&(this.unknownPropertyPaths=n,this.knownPropertyPaths=i),null===o?(a=a.concat(this.errors.slice(s)),this.errors=this.errors.slice(0,s),this.createError(c.ONE_OF_MISSING,{},"","/oneOf",a)):(this.errors=this.errors.slice(0,s),null)},u.prototype.validateNot=function(e,t,r){if(void 0===t.not)return null;var n,i,o=this.errors.length;this.trackUnknownProperties&&(n=this.unknownPropertyPaths,i=this.knownPropertyPaths,this.unknownPropertyPaths={},this.knownPropertyPaths={});var a=this.validateAll(e,t.not,null,null,r),s=this.errors.slice(o);return this.errors=this.errors.slice(0,o),this.trackUnknownProperties&&(this.unknownPropertyPaths=n,this.knownPropertyPaths=i),null===a&&0===s.length?this.createError(c.NOT_PASSED,{},"","/not"):null};var c={INVALID_TYPE:0,ENUM_MISMATCH:1,ANY_OF_MISSING:10,ONE_OF_MISSING:11,ONE_OF_MULTIPLE:12,NOT_PASSED:13,NUMBER_MULTIPLE_OF:100,NUMBER_MINIMUM:101,NUMBER_MINIMUM_EXCLUSIVE:102,NUMBER_MAXIMUM:103,NUMBER_MAXIMUM_EXCLUSIVE:104,STRING_LENGTH_SHORT:200,STRING_LENGTH_LONG:201,STRING_PATTERN:202,OBJECT_PROPERTIES_MINIMUM:300,OBJECT_PROPERTIES_MAXIMUM:301,OBJECT_REQUIRED:302,OBJECT_ADDITIONAL_PROPERTIES:303,OBJECT_DEPENDENCY_KEY:304,ARRAY_LENGTH_SHORT:400,ARRAY_LENGTH_LONG:401,ARRAY_UNIQUE:402,ARRAY_ADDITIONAL_ITEMS:403,FORMAT_CUSTOM:500,UNKNOWN_PROPERTY:1e3},p={INVALID_TYPE:"invalid type: {type} (expected {expected})",ENUM_MISMATCH:"No enum match for: {value}",ANY_OF_MISSING:'Data does not match any schemas from "anyOf"',ONE_OF_MISSING:'Data does not match any schemas from "oneOf"',ONE_OF_MULTIPLE:'Data is valid against more than one schema from "oneOf": indices {index1} and {index2}',NOT_PASSED:'Data matches schema from "not"',NUMBER_MULTIPLE_OF:"Value {value} is not a multiple of {multipleOf}",NUMBER_MINIMUM:"Value {value} is less than minimum {minimum}",NUMBER_MINIMUM_EXCLUSIVE:"Value {value} is equal to exclusive minimum {minimum}",NUMBER_MAXIMUM:"Value {value} is greater than maximum {maximum}",NUMBER_MAXIMUM_EXCLUSIVE:"Value {value} is equal to exclusive maximum {maximum}",STRING_LENGTH_SHORT:"String is too short ({length} chars), minimum {minimum}",STRING_LENGTH_LONG:"String is too long ({length} chars), maximum {maximum}",STRING_PATTERN:"String does not match pattern: {pattern}",OBJECT_PROPERTIES_MINIMUM:"Too few properties defined ({propertyCount}), minimum {minimum}",OBJECT_PROPERTIES_MAXIMUM:"Too many properties defined ({propertyCount}), maximum {maximum}",OBJECT_REQUIRED:"Missing required property: {key}",OBJECT_ADDITIONAL_PROPERTIES:"Additional properties not allowed",OBJECT_DEPENDENCY_KEY:"Dependency failed - key must exist: {missing} (due to key: {key})",ARRAY_LENGTH_SHORT:"Array is too short ({length}), minimum {minimum}",ARRAY_LENGTH_LONG:"Array is too long ({length}), maximum {maximum}",ARRAY_UNIQUE:"Array items are not unique (indices {match1} and {match2})",ARRAY_ADDITIONAL_ITEMS:"Additional items not allowed",FORMAT_CUSTOM:"Format validation failed ({message})",UNKNOWN_PROPERTY:"Unknown property (not in schema)"};a.prototype=new Error,a.prototype.prefixWith=function(e,t){if(null!==e&&(e=e.replace(/~/g,"~0").replace(/\//g,"~1"),this.dataPath="/"+e+this.dataPath),null!==t&&(t=t.replace(/~/g,"~0").replace(/\//g,"~1"),this.schemaPath="/"+t+this.schemaPath),null!==this.subErrors)for(var r=0;r<this.subErrors.length;r++)this.subErrors[r].prefixWith(e,t);return this};var f={},h=l();h.addLanguage("en-gb",p),h.tv4=h,"undefined"!=typeof module&&module.exports?module.exports=h:e.tv4=h}(this),exports.tv4=module.exports,module={exports:{}},module=void 0,function(){var e=this,t=e._,r={},n=Array.prototype,i=Object.prototype,o=Function.prototype,a=n.push,s=n.slice,l=n.concat,u=i.toString,c=i.hasOwnProperty,p=n.forEach,f=n.map,h=n.reduce,d=n.reduceRight,m=n.filter,y=n.every,g=n.some,v=n.indexOf,_=n.lastIndexOf,x=Array.isArray,A=Object.keys,b=o.bind,E=function(e){return e instanceof E?e:this instanceof E?void(this._wrapped=e):new E(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=E),exports._=E):e._=E,E.VERSION="1.5.2";var w=E.each=E.forEach=function(e,t,n){if(null!=e)if(p&&e.forEach===p)e.forEach(t,n);else if(e.length===+e.length){for(var i=0,o=e.length;o>i;i++)if(t.call(n,e[i],i,e)===r)return}else for(var a=E.keys(e),i=0,o=a.length;o>i;i++)if(t.call(n,e[a[i]],a[i],e)===r)return};E.map=E.collect=function(e,t,r){var n=[];return null==e?n:f&&e.map===f?e.map(t,r):(w(e,function(e,i,o){n.push(t.call(r,e,i,o))}),n)};var O="Reduce of empty array with no initial value";E.reduce=E.foldl=E.inject=function(e,t,r,n){var i=arguments.length>2;if(null==e&&(e=[]),h&&e.reduce===h)return n&&(t=E.bind(t,n)),i?e.reduce(t,r):e.reduce(t);if(w(e,function(e,o,a){i?r=t.call(n,r,e,o,a):(r=e,i=!0)}),!i)throw new TypeError(O);return r},E.reduceRight=E.foldr=function(e,t,r,n){var i=arguments.length>2;if(null==e&&(e=[]),d&&e.reduceRight===d)return n&&(t=E.bind(t,n)),i?e.reduceRight(t,r):e.reduceRight(t);var o=e.length;if(o!==+o){var a=E.keys(e);o=a.length}if(w(e,function(s,l,u){l=a?a[--o]:--o,i?r=t.call(n,r,e[l],l,u):(r=e[l],i=!0)}),!i)throw new TypeError(O);return r},E.find=E.detect=function(e,t,r){var n;return S(e,function(e,i,o){return t.call(r,e,i,o)?(n=e,!0):void 0}),n},E.filter=E.select=function(e,t,r){var n=[];return null==e?n:m&&e.filter===m?e.filter(t,r):(w(e,function(e,i,o){t.call(r,e,i,o)&&n.push(e)}),n)},E.reject=function(e,t,r){return E.filter(e,function(e,n,i){return!t.call(r,e,n,i)},r)},E.every=E.all=function(e,t,n){t||(t=E.identity);var i=!0;return null==e?i:y&&e.every===y?e.every(t,n):(w(e,function(e,o,a){return(i=i&&t.call(n,e,o,a))?void 0:r}),!!i)};var S=E.some=E.any=function(e,t,n){t||(t=E.identity);var i=!1;return null==e?i:g&&e.some===g?e.some(t,n):(w(e,function(e,o,a){return i||(i=t.call(n,e,o,a))?r:void 0}),!!i)};E.contains=E.include=function(e,t){return null==e?!1:v&&e.indexOf===v?-1!=e.indexOf(t):S(e,function(e){return e===t})},E.invoke=function(e,t){var r=s.call(arguments,2),n=E.isFunction(t);return E.map(e,function(e){return(n?t:e[t]).apply(e,r)})},E.pluck=function(e,t){return E.map(e,function(e){return e[t]})},E.where=function(e,t,r){return E.isEmpty(t)?r?void 0:[]:E[r?"find":"filter"](e,function(e){for(var r in t)if(t[r]!==e[r])return!1;return!0})},E.findWhere=function(e,t){return E.where(e,t,!0)},E.max=function(e,t,r){if(!t&&E.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!t&&E.isEmpty(e))return-1/0;var n={computed:-1/0,value:-1/0};return w(e,function(e,i,o){var a=t?t.call(r,e,i,o):e;a>n.computed&&(n={value:e,computed:a})}),n.value},E.min=function(e,t,r){if(!t&&E.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!t&&E.isEmpty(e))return 1/0;var n={computed:1/0,value:1/0};return w(e,function(e,i,o){var a=t?t.call(r,e,i,o):e;a<n.computed&&(n={value:e,computed:a})}),n.value},E.shuffle=function(e){var t,r=0,n=[];return w(e,function(e){t=E.random(r++),n[r-1]=n[t],n[t]=e}),n},E.sample=function(e,t,r){return arguments.length<2||r?e[E.random(e.length-1)]:E.shuffle(e).slice(0,Math.max(0,t))};var M=function(e){return E.isFunction(e)?e:function(t){return t[e]}};E.sortBy=function(e,t,r){var n=M(t);return E.pluck(E.map(e,function(e,t,i){return{value:e,index:t,criteria:n.call(r,e,t,i)}}).sort(function(e,t){var r=e.criteria,n=t.criteria;if(r!==n){if(r>n||void 0===r)return 1;if(n>r||void 0===n)return-1}return e.index-t.index}),"value")};var P=function(e){return function(t,r,n){var i={},o=null==r?E.identity:M(r);return w(t,function(r,a){var s=o.call(n,r,a,t);e(i,s,r)}),i}};E.groupBy=P(function(e,t,r){(E.has(e,t)?e[t]:e[t]=[]).push(r)}),E.indexBy=P(function(e,t,r){e[t]=r}),E.countBy=P(function(e,t){E.has(e,t)?e[t]++:e[t]=1}),E.sortedIndex=function(e,t,r,n){r=null==r?E.identity:M(r);for(var i=r.call(n,t),o=0,a=e.length;a>o;){var s=o+a>>>1;r.call(n,e[s])<i?o=s+1:a=s}return o},E.toArray=function(e){return e?E.isArray(e)?s.call(e):e.length===+e.length?E.map(e,E.identity):E.values(e):[]},E.size=function(e){return null==e?0:e.length===+e.length?e.length:E.keys(e).length},E.first=E.head=E.take=function(e,t,r){return null==e?void 0:null==t||r?e[0]:s.call(e,0,t)},E.initial=function(e,t,r){return s.call(e,0,e.length-(null==t||r?1:t))},E.last=function(e,t,r){return null==e?void 0:null==t||r?e[e.length-1]:s.call(e,Math.max(e.length-t,0))},E.rest=E.tail=E.drop=function(e,t,r){return s.call(e,null==t||r?1:t)},E.compact=function(e){return E.filter(e,E.identity)};var T=function(e,t,r){return t&&E.every(e,E.isArray)?l.apply(r,e):(w(e,function(e){E.isArray(e)||E.isArguments(e)?t?a.apply(r,e):T(e,t,r):r.push(e)}),r)};E.flatten=function(e,t){return T(e,t,[])},E.without=function(e){return E.difference(e,s.call(arguments,1))},E.uniq=E.unique=function(e,t,r,n){E.isFunction(t)&&(n=r,r=t,t=!1);var i=r?E.map(e,r,n):e,o=[],a=[];return w(i,function(r,n){(t?n&&a[a.length-1]===r:E.contains(a,r))||(a.push(r),o.push(e[n]))}),o},E.union=function(){return E.uniq(E.flatten(arguments,!0))},E.intersection=function(e){var t=s.call(arguments,1);return E.filter(E.uniq(e),function(e){return E.every(t,function(t){return E.indexOf(t,e)>=0})})},E.difference=function(e){var t=l.apply(n,s.call(arguments,1));return E.filter(e,function(e){return!E.contains(t,e)})},E.zip=function(){for(var e=E.max(E.pluck(arguments,"length").concat(0)),t=new Array(e),r=0;e>r;r++)t[r]=E.pluck(arguments,""+r);return t},E.object=function(e,t){if(null==e)return{};for(var r={},n=0,i=e.length;i>n;n++)t?r[e[n]]=t[n]:r[e[n][0]]=e[n][1];return r},E.indexOf=function(e,t,r){if(null==e)return-1;var n=0,i=e.length;if(r){if("number"!=typeof r)return n=E.sortedIndex(e,t),e[n]===t?n:-1;n=0>r?Math.max(0,i+r):r}if(v&&e.indexOf===v)return e.indexOf(t,r);for(;i>n;n++)if(e[n]===t)return n;return-1},E.lastIndexOf=function(e,t,r){if(null==e)return-1;var n=null!=r;if(_&&e.lastIndexOf===_)return n?e.lastIndexOf(t,r):e.lastIndexOf(t);for(var i=n?r:e.length;i--;)if(e[i]===t)return i;return-1},E.range=function(e,t,r){arguments.length<=1&&(t=e||0,e=0),r=arguments[2]||1;for(var n=Math.max(Math.ceil((t-e)/r),0),i=0,o=new Array(n);n>i;)o[i++]=e,e+=r;return o};var I=function(){};E.bind=function(e,t){var r,n;if(b&&e.bind===b)return b.apply(e,s.call(arguments,1));if(!E.isFunction(e))throw new TypeError;return r=s.call(arguments,2),n=function(){if(!(this instanceof n))return e.apply(t,r.concat(s.call(arguments)));I.prototype=e.prototype;var i=new I;I.prototype=null;var o=e.apply(i,r.concat(s.call(arguments)));return Object(o)===o?o:i}},E.partial=function(e){var t=s.call(arguments,1);return function(){return e.apply(this,t.concat(s.call(arguments)))}},E.bindAll=function(e){var t=s.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return w(t,function(t){e[t]=E.bind(e[t],e)}),e},E.memoize=function(e,t){var r={};return t||(t=E.identity),function(){var n=t.apply(this,arguments);return E.has(r,n)?r[n]:r[n]=e.apply(this,arguments)}},E.delay=function(e,t){var r=s.call(arguments,2);return setTimeout(function(){return e.apply(null,r)},t)},E.defer=function(e){return E.delay.apply(E,[e,1].concat(s.call(arguments,1)))},E.throttle=function(e,t,r){var n,i,o,a=null,s=0;r||(r={});var l=function(){s=r.leading===!1?0:new Date,a=null,o=e.apply(n,i)};return function(){var u=new Date;s||r.leading!==!1||(s=u);var c=t-(u-s);return n=this,i=arguments,0>=c?(clearTimeout(a),a=null,s=u,o=e.apply(n,i)):a||r.trailing===!1||(a=setTimeout(l,c)),o}},E.debounce=function(e,t,r){var n,i,o,a,s;return function(){o=this,i=arguments,a=new Date;var l=function(){var u=new Date-a;t>u?n=setTimeout(l,t-u):(n=null,r||(s=e.apply(o,i)))},u=r&&!n;return n||(n=setTimeout(l,t)),u&&(s=e.apply(o,i)),s}},E.once=function(e){var t,r=!1;return function(){return r?t:(r=!0,t=e.apply(this,arguments),e=null,t)}},E.wrap=function(e,t){return function(){var r=[e];return a.apply(r,arguments),t.apply(this,r)}},E.compose=function(){var e=arguments;return function(){for(var t=arguments,r=e.length-1;r>=0;r--)t=[e[r].apply(this,t)];return t[0]}},E.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},E.keys=A||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var r in e)E.has(e,r)&&t.push(r);return t},E.values=function(e){for(var t=E.keys(e),r=t.length,n=new Array(r),i=0;r>i;i++)n[i]=e[t[i]];return n},E.pairs=function(e){for(var t=E.keys(e),r=t.length,n=new Array(r),i=0;r>i;i++)n[i]=[t[i],e[t[i]]];return n},E.invert=function(e){for(var t={},r=E.keys(e),n=0,i=r.length;i>n;n++)t[e[r[n]]]=r[n];return t},E.functions=E.methods=function(e){var t=[];for(var r in e)E.isFunction(e[r])&&t.push(r);return t.sort()},E.extend=function(e){return w(s.call(arguments,1),function(t){if(t)for(var r in t)e[r]=t[r]}),e},E.pick=function(e){var t={},r=l.apply(n,s.call(arguments,1));return w(r,function(r){r in e&&(t[r]=e[r])}),t},E.omit=function(e){var t={},r=l.apply(n,s.call(arguments,1));for(var i in e)E.contains(r,i)||(t[i]=e[i]);return t},E.defaults=function(e){return w(s.call(arguments,1),function(t){if(t)for(var r in t)void 0===e[r]&&(e[r]=t[r])}),e},E.clone=function(e){return E.isObject(e)?E.isArray(e)?e.slice():E.extend({},e):e},E.tap=function(e,t){return t(e),e};var N=function(e,t,r,n){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof E&&(e=e._wrapped),t instanceof E&&(t=t._wrapped);var i=u.call(e);if(i!=u.call(t))return!1;switch(i){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var o=r.length;o--;)if(r[o]==e)return n[o]==t;var a=e.constructor,s=t.constructor;if(a!==s&&!(E.isFunction(a)&&a instanceof a&&E.isFunction(s)&&s instanceof s))return!1;r.push(e),n.push(t);var l=0,c=!0;if("[object Array]"==i){if(l=e.length,c=l==t.length)for(;l--&&(c=N(e[l],t[l],r,n)););}else{for(var p in e)if(E.has(e,p)&&(l++,!(c=E.has(t,p)&&N(e[p],t[p],r,n))))break;if(c){for(p in t)if(E.has(t,p)&&!l--)break;c=!l}}return r.pop(),n.pop(),c};E.isEqual=function(e,t){return N(e,t,[],[])},E.isEmpty=function(e){if(null==e)return!0;if(E.isArray(e)||E.isString(e))return 0===e.length;for(var t in e)if(E.has(e,t))return!1;return!0},E.isElement=function(e){return!(!e||1!==e.nodeType)},E.isArray=x||function(e){return"[object Array]"==u.call(e)},E.isObject=function(e){return e===Object(e)},w(["Arguments","Function","String","Number","Date","RegExp"],function(e){E["is"+e]=function(t){return u.call(t)=="[object "+e+"]"}}),E.isArguments(arguments)||(E.isArguments=function(e){return!(!e||!E.has(e,"callee"))}),"function"!=typeof/./&&(E.isFunction=function(e){return"function"==typeof e}),E.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},E.isNaN=function(e){return E.isNumber(e)&&e!=+e},E.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==u.call(e)},E.isNull=function(e){return null===e},E.isUndefined=function(e){return void 0===e},E.has=function(e,t){return c.call(e,t)},E.noConflict=function(){return e._=t,this},E.identity=function(e){return e},E.times=function(e,t,r){for(var n=Array(Math.max(0,e)),i=0;e>i;i++)n[i]=t.call(r,i);return n},E.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var j={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};j.unescape=E.invert(j.escape);var C={escape:new RegExp("["+E.keys(j.escape).join("")+"]","g"),unescape:new RegExp("("+E.keys(j.unescape).join("|")+")","g")};E.each(["escape","unescape"],function(e){E[e]=function(t){return null==t?"":(""+t).replace(C[e],function(t){return j[e][t]})}}),E.result=function(e,t){if(null==e)return void 0;var r=e[t];return E.isFunction(r)?r.call(e):r},E.mixin=function(e){w(E.functions(e),function(t){var r=E[t]=e[t];E.prototype[t]=function(){var e=[this._wrapped];return a.apply(e,arguments),L.call(this,r.apply(E,e))}})};var R=0;E.uniqueId=function(e){var t=++R+"";return e?e+t:t},E.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var k=/(.)^/,U={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},F=/\\|'|\r|\n|\t|\u2028|\u2029/g;E.template=function(e,t,r){var n;r=E.defaults({},r,E.templateSettings);var i=new RegExp([(r.escape||k).source,(r.interpolate||k).source,(r.evaluate||k).source].join("|")+"|$","g"),o=0,a="__p+='";e.replace(i,function(t,r,n,i,s){return a+=e.slice(o,s).replace(F,function(e){return"\\"+U[e]}),r&&(a+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'"),n&&(a+="'+\n((__t=("+n+"))==null?'':__t)+\n'"),i&&(a+="';\n"+i+"\n__p+='"),o=s+t.length,t}),a+="';\n",r.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{n=new Function(r.variable||"obj","_",a)}catch(s){throw s.source=a,s}if(t)return n(t,E);var l=function(e){return n.call(this,e,E)};return l.source="function("+(r.variable||"obj")+"){\n"+a+"}",l},E.chain=function(e){return E(e).chain()};var L=function(e){return this._chain?E(e).chain():e};E.mixin(E),w(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=n[e];E.prototype[e]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!=e&&"splice"!=e||0!==r.length||delete r[0],L.call(this,r)}}),w(["concat","join","slice"],function(e){var t=n[e];E.prototype[e]=function(){return L.call(this,t.apply(this._wrapped,arguments))}}),E.extend(E.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),_exports.LazyLoad=LazyLoad}.call(_window,_exports,_window,window,_module={exports:{}}),void 0===window.JSON&&(window.JSON=_exports.JSON);var tv4=_exports.tv4,reqwest=_exports.reqwest,_=_exports._,LazyLoad=_exports.LazyLoad;if(delete _exports,function(e){function t(e){return-1===e.indexOf("?")?"?":"&"}function r(e){var t=String(e).replace(/^\s+|\s+$/g,"").match(/^([^:\/?#]+:)?(\/\/(?:[^:@]*(?::[^:@]*)?@)?(([^:\/?#]*)(?::(\d*))?))?([^?#]*)(\?[^#]*)?(#[\s\S]*)?/);return t?{href:t[0]||"",protocol:t[1]||"",authority:t[2]||"",host:t[3]||"",hostname:t[4]||"",port:t[5]||"",pathname:t[6]||"",search:t[7]||"",hash:t[8]||""}:null}function n(e,t){function n(e){var t=[];return e.replace(/^(\.\.?(\/|$))+/,"").replace(/\/(\.(\/|$))+/g,"/").replace(/\/\.\.$/,"/../").replace(/\/?[^\/]*/g,function(e){"/.."===e?t.pop():t.push(e)}),t.join("").replace(/^\//,"/"===e.charAt(0)?"/":"")}return t=r(t||""),e=r(e||""),t&&e?(t.protocol||e.protocol)+(t.protocol||t.authority?t.authority:e.authority)+n(t.protocol||t.authority||"/"===t.pathname.charAt(0)?t.pathname:t.pathname?(e.authority&&!e.pathname?"/":"")+e.pathname.slice(0,e.pathname.lastIndexOf("/")+1)+t.pathname:e.pathname)+(t.protocol||t.authority||t.pathname?t.search:t.search||e.search)+t.hash:null}function i(e){var t,r,i=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,o=e.toLowerCase(),a=i.exec(o);try{t=location.href}catch(s){t=document.createElement("a"),t.href="",t=t.href}t=t.toLowerCase(),a||(o=n(t,o).toLowerCase(),a=i.exec(o)),r=i.exec(t)||[];var l=!(a&&(a[1]!==r[1]||a[2]!==r[2]||(a[3]||("http:"===a[1]?"80":"443"))!==(r[3]||("http:"===r[1]?"80":"443"))));return l}function o(e){return Math.floor(Math.random()*e)}e.Ajax=function(e,r){if(!e.url)throw"F2.Ajax: you must provide a url.";e.crossOrigin=!i(e.url),e.method||(e.crossOrigin?e.type="jsonp":e.method="post"),e.type||(e.type="json"),("get"===e.method||"jsonp"===e.type)&&(r||(e.url+=t(e.url)+o(1e6))),"jsonp"===e.type&&(e.jsonpCallbackName="F2_"+o(1e6),window[e.jsonpCallbackName]=function(t){e.success&&e.success(t),e.complete&&e.complete(),delete window[e.jsonpCallbackName]});var n=reqwest(e);return function(){var e={isAborted:!1};return e.abort=function(){e.isAborted=!0,n.request.abort()},e}()}}(Helpers),function(e){function t(e){var t,r;if(e){var i=e.getAttribute("data-f2-appid"),o=e.getAttribute("data-f2-manifesturl");if(i&&o){r={appId:i,manifestUrl:o};var a=e.getAttribute("data-f2-context");if(a)try{r.context=JSON.parse(a)}catch(s){console.warn('F2: "data-f2-context" of node is not valid JSON','"'+s+'"')}for(var l in e.attributes)if(0===l.indexOf("data-f2-context-"))for(var u=l.replace("data-f2-context-","").split("-"),c=0,p=u.length;p>c;c++)if(c===p-1)try{r.context[u[c]]=JSON.parse(e.getAttribute(l))}catch(s){r.context[u[c]]=e.getAttribute(l)}else r.context[u[c]]={}}}if(r){var f=n(e);t={appConfig:r,isPreload:f,node:e}}return t}function r(e,t){var r=[];return function n(e){for(;e;)1===e.nodeType&&e.getAttribute(t)&&r.push(e),e.hasChildNodes()&&n(e.firstChild),e=e.nextSibling}(e),r}function n(e){var t=!1;if(e.hasChildNodes())for(var r=0,n=e.childNodes.length;n>r;r++)if(1===e.childNodes[r].nodeType){t=!0;break}return t}e.AppPlaceholders={getInNode:function(e){for(var n=[],i=r(e,"data-f2-appid"),o=0,a=i.length;a>o;o++){var s=t(i[o]);s&&n.push(s)}return n}}}(Helpers),function(F2,Helpers,_){function remove(e){delete appInstances[e]}function loadApps(e,t,r,n,i){for(var o,a=[],s=[],l=0,u=e.length;u>l;l++){var c={};e[l]&&F2.Schemas.validate(e[l],"appConfig")&&(c.instanceId=F2.guid(),c.appConfig=e[l],e[l].root&&1===e[l].root.nodeType?(c.root=e[l].root,c.appContent={success:!0,data:e[l].context||{}}):e[l].manifestUrl&&s.push(c)),a.push(c)}return s.length?o=requestApps(s,function(){i&&i(),delegateHtmlLoading(a,t,n,o)}):(i&&i(),delegateHtmlLoading(a,t,n,o)),o||{}}function dumpAppsOnDom(){var e=Array.prototype.slice.call(arguments);if(e.length){for(var t=document.createDocumentFragment(),r=0,n=e.length;n>r;r++)e[r].root&&t.appendChild(e[r].root);document.body.appendChild(t)}}function delegateHtmlLoading(e,t,r,n){var i=[];if(n)for(var o=0,a=e.length;a>o;o++){var s=e[o].appConfig.manifestUrl;n[s]&&n[s].request.isAborted&&(e[o].isAborted=!0,i.push(o))}for(t?t.apply(window,e):dumpAppsOnDom.apply(window,e);i.length;)e.splice(i.pop(),1);initAppClasses(e,r,n)}function initAppClasses(e,t){var r=_.map(e,function(e){return e.appConfig.appId});r.length?require(r,function(){for(var r=Array.prototype.slice.apply(arguments),n=0,i=e.length;i>n;n++)try{var o=new r[n](e[n].instanceId,e[n].appConfig,e[n].appContent.data||{},e[n].root);o.init&&o.init(),appInstances[e[n].instanceId]=o}catch(a){console.error("F2: could not init",e[n].appConfig.appId,'"'+a.toString()+'"')}t&&t()}):t&&t()}function requestApps(e,t){for(var r={},n={},i=0,o=e.length;o>i;i++){var a=e[i].appConfig;n[a.manifestUrl]||(n[a.manifestUrl]={singles:[],batch:[]}),a.enableBatchRequests?n[a.manifestUrl].batch.push(e[i]):n[a.manifestUrl].singles.push(e[i])}var s=[],l=0;for(var u in n){r[u]=[];var c=n[u].singles.slice();n[u].batch.length&&c.push(n[u].batch),l+=c.length,_.each(c,function(e){_.isArray(e)||(e=[e]);var n=_.map(e,function(e){return e.appConfig}),i=Helpers.Ajax({complete:function(){if(!--l){var e=combineAppManifests(s);loadStaticFiles(e.styles,e.scripts,e.inlineScripts,function(){t()})}},data:{params:JSON.stringify(n)},success:function(t){F2.Schemas.validate(t,"appManifest")||(t={apps:[]},_.each(n,function(){t.apps.push({success:!1})})),_.each(t.apps,function(t,r){if(e[r].appContent=t,t.html){var n=document.createElement("div");n.innerHTML=t.html,e[r].root=n.firstChild}}),s.push(t)},type:"json",url:u});r[u]={apps:e,request:i}})}return r}function combineAppManifests(e){for(var t={apps:[],inlineScripts:[],scripts:[],styles:[]},r=0,n=e.length;n>r;r++)for(var i in t)for(var o=0,a=e[r][i].length;a>o;o++)t[i].push(e[r][i][o]);return t}function loadStaticFiles(e,t,r,n){function i(){a&&s&&n()}var o=F2.config(),a=!1,s=!1;loadStyles(o,e,function(){a=!0,i()}),loadScripts(o,t,function(){loadInlineScripts(r,function(){s=!0,i()})})}function loadInlineScripts(inlines){try{eval(inlines.join(";"))}catch(e){console.error("Error loading inline scripts: "+e)}}function loadScripts(e,t,r){_.isFunction(e.loadScripts)?e.loadScripts(t,r):require(t,function(){r()})}function loadStyles(e,t,r){if(_.isFunction(e.loadStyles))e.loadStyles(t,r);else{for(var n=document.getElementsByTagName("head")[0],i=0,o=t.length;o>i;i++){var a=document.createNode("link");a.rel="stylesheet",a.href=t[i],a.async=!1,n.appendChild(a)}r()}}var appInstances={};Helpers.Apps={getInstance:function(e){var t;if(1===e.nodeType){for(var r in appInstances)if(appInstances[r].root===e){t=appInstances[r];break}}else t=appInstances[e];return t},load:loadApps,remove:remove}}(F2,Helpers,_),function(e,t){function r(e,t,r,n){this.instanceId=e,this.appConfig=t,this.context=r,this.root=n}r.prototype={dispose:function(){},events:{many:function(t,r,n){return e.Events.many(t,r,n,this)},off:function(t,r){return e.Events.off(t,r,this)},on:function(t,r){return e.Events.on(t,r,this)},once:function(t,r){return e.Events.once(t,r,this)}},reload:function(r){var n=this;t.extend(this.appConfig.context,r),e.load(this.appConfig).then(function(t){t.root=n.root,e.removeApp(n.instanceId,!1)})}},e.AppClass=r}(F2,_),function(e){e.Constants={EVENTS:{APP_SYMBOL_CHANGE:"__appSymbolChange__",APP_WIDTH_CHANGE:"__appWidthChange__",CONTAINER_SYMBOL_CHANGE:"__containerSymbolChange__",CONTAINER_WIDTH_CHANGE:"__containerWidthChange__"},VIEWS:{ABOUT:"about",DATA_ATTRIBUTE:"data-f2-view",HELP:"help",HOME:"home",REMOVE:"remove",SETTINGS:"settings"}}}(F2),function(e,t,r){var n={loadScripts:null,loadStyles:null,supportedViews:[],xhr:{dataType:null,type:null,url:null},ui:{modal:null,showLoading:null,hideLoading:null}},i={};e.Apps={},e.config=function(t){return t&&e.Schemas.validate(t,"containerConfig")&&(n=r.defaults({},t,n)),n},e.guid=function o(){var e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,r="x"===e?t:3&t|8;return r.toString(16)});return i[e]&&(e=o()),i[e]=!0,e},e.load=function(e){if(!e.appConfigs||r.isArray(e.appConfigs)&&!e.appConfigs.length)throw"F2: you must specify at least one AppConfig to load";r.isArray(e.appConfigs)||(e.appConfigs=[e.appConfigs]);var n=t.Apps.load(e.appConfigs,e.success,e.error,e.complete,e.afterRequest);return{abort:function(){if(n)for(var e in n)n[e].request.abort()},requests:n}},e.removeApp=function(r){if(!r)throw"F2: you must provide an instanceId or a root to remove an app";var n=t.Apps.getInstance(r);n&&n.instanceId?(n.dispose&&n.dispose(),e.Events.off(null,null,n),n.root&&n.root.parentNode&&n.root.parentNode.removeChild(n.root),n.__f2Disposed__=!0,t.Apps.remove(n.instanceId)):console.warn("F2: could not find an app to remove")}}(F2,Helpers,_),function(e){function t(e,t,r,i){if(!e)throw"F2.Events: you must provide an event name.";if(!t)throw"F2.Events: you must provide an event handler.";n[e]||(n[e]=[]),n[e].push({handler:t,context:r||window,timesLeft:i})}function r(e,t,i){if(!e&&!t&&!i)throw'F2.Events: "off" accepts the following combinations of parameters: name/handler, name/context, handler, context.';if(e&&!t&&!i)throw"F2.Events: you must pass either a handler or context along with name";if(n[e]&&(t||i))for(var o=n[e].length;o--;){var a=t&&n[e][o].handler===t,s=i&&n[e][o].context===i;(a||s)&&n[e].splice(o,1)}else if(i||t)for(var l in n)r(l,t,i)}var n={};e.Events={emit:function(e,t){if(!e)throw"F2.Events: you must provide an event name to emit.";if(n[e]){t=Array.prototype.slice.call(arguments,1);for(var i=[],o=n[e].length;o--;){var a=n[e][o];a.context.__f2Disposed__?i.push(a.context):(a.handler.apply(a.context,t),void 0!==a.timesLeft&&0===--a.timesLeft&&n[e].splice(o,1))}for(;i.length;)r(null,null,i.shift())}},many:function(e,r,n,i){if(r=r?parseInt(r,10):0,1>r)throw'F2.Events: "timesToListen" must be greater than 0.';return t(e,n,i,r)},off:function(e,t,n){return r(e,t,n)},on:function(e,r,n){return t(e,r,n)},once:function(e,r,n){return t(e,r,n,1)}}}(F2),function(e,t){e.Schemas={add:function(e,r){if(!e)throw"F2.Schemas: you must provide a schema name.";if(!r)throw"F2.Schemas: you must provide a schema.";if(t.getSchema(e))throw"F2.Schemas: "+e+" is already a registered schema.";return t.addSchema(e,r),!0},isDefined:function(e){return!!t.getSchemaMap()[e]},validate:function(e,r){if(!r)throw"F2.Schemas: you must provide a schema name.";var n=t.getSchema(r);if(!n)throw"F2.Schemas: unrecognized schema name.";return t.validate(e,n)}}}(F2,tv4),function(e){var t={appConfig:{id:"appConfig",title:"App Config",type:"object",properties:{appId:{type:"string"},context:{type:"object"},manifestUrl:{type:"string"},enableBatchRequests:{type:"boolean"},views:{type:"array",items:{type:"string"}}},required:["appId"]},appContent:{id:"appContent",title:"App Content",type:"object",properties:{success:{type:"boolean"},data:{type:"object"},html:{type:"string"}},required:["success"]},appManifest:{id:"appManifest",title:"App Manifest",type:"object",properties:{scripts:{type:"array",items:{type:"string"}},styles:{type:"array",items:{type:"string"}},inlineScripts:{type:"array",items:{type:"string"}},apps:{type:"array",items:{$ref:"appContent"}}},required:["scripts","styles","inlineScripts","apps"]},containerConfig:{id:"containerConfig",title:"Container Config",type:"object",properties:{loadScripts:{type:"object"},loadStyles:{type:"object"},supportedViews:{type:"array",items:{type:"string"}},ui:{type:"object",properties:{modal:{},hideLoading:{},showLoading:{}}},xhr:{type:"object",properties:{dataType:{type:"object"},type:{type:"object"},url:{type:"object"},timeout:{type:"integer",minimum:0}}}}},uiModalParams:{id:"uiModalParams",title:"F2.UI Modal Parameters",type:"object",properties:{buttons:{type:"array",items:{type:"object",properties:{label:{type:"string"},handler:{type:"object"}},required:["label","handler"]}},content:{type:"string"},onClose:{type:"object"},title:{type:"string"}}}};
for(var r in t)e.Schemas.add(r,t[r])}(F2),function(e,t){function r(r){var n=e.config();n.ui&&t.isFunction(n.ui.modal)?t.isObject(r)&&e.Schemas.validate(r,"uiModalParams")?n.ui.modal(r):console.error("F2.UI: The parameters to ui.modal are incorrect."):console.error("F2.UI: The container has not defined ui.modal.")}function n(r){var n=e.config();n.ui&&t.isFunction(n.ui.showLoading)?!r||r&&1===r.nodeType?n.ui.showLoading(r):console.error("F2.UI: the root passed was not a native DOM node."):console.error("F2.UI: The container has not defined ui.showLoading.")}function i(r){var n=e.config();n.ui&&t.isFunction(n.ui.hideLoading)?!r||r&&1===r.nodeType?n.ui.hideLoading(r):console.error("F2.UI: the root passed was not a native DOM node."):console.error("F2.UI: The container has not defined ui.hideLoading.")}e.UI={modal:function(e){return r(e)},showLoading:function(e){return n(e)},hideLoading:function(e){return i(e)}}}(F2,_),function(e,t){setTimeout(function(){var r=t.AppPlaceholders.getInNode(document.body);if(r&&r.length){var n=_.map(r,function(e){return e.isPreload&&(e.appConfig.root=e.node),e.appConfig});e.load({appConfigs:n,success:function(){for(var e=Array.prototype.slice.call(arguments),t=0,n=e.length;n>t;t++)r[t].isPreload||r[t].node.parentNode.replaceChild(e[t].root,r[t].node)}})}},0)}(F2,Helpers),"function"!=typeof define||!define.amd)throw"F2 did not detect an AMD loader.";define("F2",[],function(){return F2})}();